!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e){e.exports=JSON.parse('{"themes":[{"name":"yellow","primaryColor":"#F8C066","secondaryColor":"#000000","secondaryColor-rgb":"0, 0, 0","terciaryColor":"rgba(110, 49, 9, 0.2)","gameboyColor":"#FFB744","borderColor":"rgba(110, 49, 9, 0.2)"},{"name":"pink","primaryColor":"#E1517B","secondaryColor":"#FFFFFF","secondaryColor-rgb":"255, 255, 255","terciaryColor":"rgba(216, 216, 216, 0.5)","gameboyColor":"#DA265B","borderColor":"rgba(255, 255, 255, 0.5)"},{"name":"purple","primaryColor":"#795E99","secondaryColor":"#FFFFFF","secondaryColor-rgb":"255, 255, 255","terciaryColor":"rgba(216, 216, 216, 0.5)","gameboyColor":"#6A4C8E","borderColor":"rgba(255, 255, 255, 0.5)"},{"name":"green","primaryColor":"#CDE188","secondaryColor":"#000000","secondaryColor-rgb":"0, 0, 0","terciaryColor":"rgba(216, 216, 216, 0.5)","gameboyColor":"#ADCD39","borderColor":"rgba(110, 49, 9, 0.2)"},{"name":"blue","primaryColor":"#76D4E1","secondaryColor":"#000000","secondaryColor-rgb":"0, 0, 0","terciaryColor":"rgba(216, 216, 216, 0.5)","gameboyColor":"#22B1C5","borderColor":"rgba(110, 49, 9, 0.2)"},{"name":"grey","primaryColor":"#C2C3C8","secondaryColor":"#000000","secondaryColor-rgb":"0, 0, 0","terciaryColor":"rgba(216, 216, 216, 0.5)","gameboyColor":"#A8A9AD","borderColor":"rgba(0, 0, 0, 0.2)"}],"products":[{"name":"Pocket","slug":"pocket","description":"ainda menor que<br/>a versão anterior","themes":["yellow","pink","purple"],"informations":[{"title":"Como jogar","content":["Nori grape silver beet broccoli kombu beet greens","fava bean potato quandong celery."]},{"title":"Onde encontrar","content":["Bunya nuts black-eyed pea prairie turnip leek lentil","turnip greens parsnip. Sea lettuce lettuce water chestnut eggplant."]},{"title":"Mais informações","content":["Sea lettuce lettuce water chestnut eggplant winter purslane fennel azuki bean","Nori grape silver beet broccoli kombu beet greens"]}]},{"name":"Color","slug":"color","description":"um novo visor em<br/>cores para você","themes":["yellow","pink","purple","green","blue"],"informations":[{"title":"Como jogar","content":["Nori grape silver beet broccoli kombu beet greens","fava bean potato quandong celery."]},{"title":"Onde encontrar","content":["Bunya nuts black-eyed pea prairie turnip leek lentil","turnip greens parsnip. Sea lettuce lettuce water chestnut eggplant."]},{"title":"Mais informações","content":["Sea lettuce lettuce water chestnut eggplant winter purslane fennel azuki bean","Nori grape silver beet broccoli kombu beet greens"]}]},{"name":"Light","slug":"light","description":"em sua versão<br/>retroiluminada","themes":["grey"],"informations":[{"title":"Como jogar","content":["Nori grape silver beet broccoli kombu beet greens","fava bean potato quandong celery."]},{"title":"Onde encontrar","content":["Bunya nuts black-eyed pea prairie turnip leek lentil","turnip greens parsnip. Sea lettuce lettuce water chestnut eggplant."]},{"title":"Mais informações","content":["Sea lettuce lettuce water chestnut eggplant winter purslane fennel azuki bean","Nori grape silver beet broccoli kombu beet greens"]}]}]}')},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(1);function n(e,t){var r=document.getElementById("accordion-item"),n=e.querySelector("#information-accordion"),o=function(e,t){var n=document.importNode(r.content,!0),o={clone:n,data:e,index:t};return function(e){var t=e.clone,r=e.data,n=e.index,o=t.querySelector("button");o.textContent=r.title,o.setAttribute("aria-controls","content-".concat(n)),o.setAttribute("aria-hidden",!0),o.setAttribute("aria-expanded",!1),o.setAttribute("id","accordion-control-".concat(n)),o.setAttribute("data-index",n),o.classList.add("accordion-button")}(o),function(e){var t=e.clone,r=e.data,n=e.index,o=t.querySelector("div");o.setAttribute("id","content-".concat(n)),o.classList.add("accordion-content"),r.content.forEach(function(e){var t=document.createElement("p"),r=document.createTextNode(e);t.appendChild(r),o.appendChild(t)})}(o),n};return t.informations.forEach(function(e,t){var r=o(e,t);n.append(r)}),n}function o(e){var t=document.getElementById("information"),r=document.getElementById("information-template"),o=function(e){var o=document.importNode(r.content,!0);o.querySelector("#information-title").innerHTML="Game Boy ".concat(e.name,",<br/>").concat(e.description),n(o,e),t.append(o)},a=function(e){t.innerHTML="",o(window.data[e])};e.subscribe("gameboy selected",function(e){var t=e.dropdownOptIndex;a(void 0===t?0:t)}),t.addEventListener("click",function(e){!function(e){if(e.matches(".accordion-button")){var t=e.getAttribute("aria-controls"),r=document.getElementById(t),n=Boolean("true"===e.getAttribute("aria-expanded")),o=Boolean("true"===e.getAttribute("aria-hidden"));e.setAttribute("aria-expanded","".concat(!n)),o?(r.classList.add("accordion-content--show"),e.setAttribute("aria-hidden",!1)):(r.classList.remove("accordion-content--show"),e.setAttribute("aria-hidden",!0))}}(e.target)}),o(window.data[0])}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var r=document.getElementById(t),n=r.getElementsByClassName("dropdown__options")[0],o=a(document.getElementsByClassName("dropdown__opt"));r.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n.classList.toggle("dropdown__options--active"),n.classList.contains("dropdown__options--active")||(o.forEach(function(e){return function(e){var t=e.getAttribute("for");e.classList.remove("dropdown__opt--active"),e.querySelector("#".concat(t)).checked=!1}(e)}),function(t){var r=t.getAttribute("for");t.classList.add("dropdown__opt--active"),t.querySelector("#".concat(r)).checked=!0,e.publish("gameboy selected",{dropdownOptIndex:o.indexOf(t)})}(t.target))})}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){var t=document.getElementById("main"),r=document.getElementById("color-options"),n=c(r.getElementsByClassName("color-opt__label")),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=window.data[e],r=n.filter(function(e){var r=e.getAttribute("data-color");return e.classList.remove("color-opt__label--hide"),!t.themes.includes(r)});r.forEach(function(e){return e.classList.add("color-opt__label--hide")})};r.addEventListener("click",function(e){e.preventDefault();var r=e.target.getAttribute("for"),n=e.target.querySelector("#".concat(r));!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.classList="",e.classList=c(t)}(t,["theme-".concat(n.value)])}),e.subscribe("gameboy selected",function(e){var t=e.dropdownOptIndex;o(void 0===t?0:t)}),o()}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var t,r,n;return t=e,(r=[{key:"subscribe",value:function(e,t){return this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)}},{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.events.hasOwnProperty(e)?this.events[e].map(function(e){return e(t)}):[]}}])&&u(t.prototype,r),n&&u(t,n),e}(),d=r(0);window.data=d.products,document.addEventListener("DOMContentLoaded",function(e){var t,r,n,a,c=new s;i(c,"dropdown-gb"),l(c),t="btn-filter",r="filters",n=document.getElementById(t),a=document.getElementById(r),n.addEventListener("click",function(){n.classList.toggle("btn__filter--active"),a.classList.toggle("filters--active")}),o(c)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2FjY29yZGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5mb3JtYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2Ryb3Bkb3duLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb2xvci1vcHRpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9wdWJzdWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9idG4tZmlsdGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY3JlYXRlQWNjb3JkaW9uIiwiY2xvbmUiLCJkYXRhIiwiYWNjb3JkaW9uSXRlbVRlbXBsYXRlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImluZm9ybWF0aW9uQWNjb3JkaW9uIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUFjY29yZGlvbkl0ZW0iLCJpbmRleCIsImltcG9ydE5vZGUiLCJjb250ZW50IiwicGFyYW1zIiwiYWNjb3JkaW9uSXRlbUJ0biIsInRleHRDb250ZW50IiwidGl0bGUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBY2NvcmRpb25CdG4iLCJhY2NvcmRpb25JdGVtRGl2IiwiZm9yRWFjaCIsInBFbCIsImNyZWF0ZUVsZW1lbnQiLCJwVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJzZXRBY2NvcmRpb25EaXYiLCJpbmZvcm1hdGlvbnMiLCJpbmZvIiwiaXRlbSIsImFwcGVuZCIsImluaXRJbmZvcm1hdGlvbiIsInB1YnN1YiIsImluZm9ybWF0aW9uRWwiLCJpbmZvcm1hdGlvblRlbXBsYXRlIiwiYWRkSW5mb3JtYXRpb24iLCJpbm5lckhUTUwiLCJkZXNjcmlwdGlvbiIsInN3aXRjaEluZm9ybWF0aW9uIiwiZHJvcGRvd25PcHRJbmRleCIsIndpbmRvdyIsInN1YnNjcmliZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiYnV0dG9uIiwibWF0Y2hlcyIsImJ1dHRvbkNvbnRyb2xzIiwiZ2V0QXR0cmlidXRlIiwiaXNBcmlhRXhwYW5kZWQiLCJCb29sZWFuIiwiaXNBcmlhSGlkZGVuIiwicmVtb3ZlIiwic2V0QWNjb3JkaW9uSW50ZXJhY3Rpb24iLCJ0YXJnZXQiLCJpbml0RHJvcGRvd24iLCJpZCIsImRyb3Bkb3duIiwiZHJvcGRvd25PcHRpb25zTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJkcm9wZG93bk9wdGlvbnMiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRvZ2dsZSIsImNvbnRhaW5zIiwib3B0IiwibGFiZWxFbCIsImNoZWNrZWQiLCJkZWFjdGl2YXRlT3B0aW9uIiwicHVibGlzaCIsImluZGV4T2YiLCJhY3RpdmF0ZU9wdGlvbiIsImluaXRDb2xvcnMiLCJtYWluIiwiY29sb3JzTGlzdCIsImNvbG9ycyIsImFwcGx5Q29sb3JGaWx0ZXIiLCJjdXJyZW50R0IiLCJjb2xvcnNUb0hpZGUiLCJmaWx0ZXIiLCJjb2xvciIsImNvbG9yVmFsdWUiLCJ0aGVtZXMiLCJpbmNsdWRlcyIsImlucHV0IiwiZWxlbWVudCIsIm5ld0NsYXNzIiwic3Vic3RpdHV0ZUNsYXNzTGlzdCIsIlB1YlN1YiIsInRoaXMiLCJldmVudHMiLCJldmVudCIsImNhbGxiYWNrIiwicHVzaCIsIm1hcCIsImpzb25EYXRhIiwicHJvZHVjdHMiLCJidG5JZCIsImZpbHRlcklkIiwiZmlsdGVyQnRuIiwiZmlsdGVycyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVB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LEtBQUtDLE9BQU9DLEdBQU9HLElBQUksU0FBQUYsR0FBUSxPQUFJQSxFQUFTMUYsS0FGMUMsUSx1Q0NOYnVDLE9BQU92QyxLQUFPNkYsRUFBU0MsU0FFdkI1RixTQUFTdUMsaUJBQWlCLG1CQUFvQixTQUFBZ0QsR0FDNUMsSUNYb0NNLEVBQU9DLEVBQ3JDQyxFQUNBQyxFRFNBbkUsRUFBUyxJQUFJdUQsRUFFbkJqQyxFQUFhdEIsRUFBUSxlQUNyQnVDLEVBQVd2QyxHQ2R5QmdFLEVEZXRCLGFDZjZCQyxFRGVmLFVDZHRCQyxFQUFZL0YsU0FBU0MsZUFBZTRGLEdBQ3BDRyxFQUFVaEcsU0FBU0MsZUFBZTZGLEdBRXhDQyxFQUFVeEQsaUJBQWlCLFFBQVMsV0FDbEN3RCxFQUFVbEYsVUFBVThDLE9BQU8sdUJBQzNCcUMsRUFBUW5GLFVBQVU4QyxPQUFPLHFCRFUzQi9CLEVBQWdCQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVBY2NvcmRpb24oY2xvbmUsIGRhdGEpIHtcbiAgY29uc3QgYWNjb3JkaW9uSXRlbVRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY2NvcmRpb24taXRlbVwiKTtcbiAgY29uc3QgaW5mb3JtYXRpb25BY2NvcmRpb24gPSBjbG9uZS5xdWVyeVNlbGVjdG9yKFwiI2luZm9ybWF0aW9uLWFjY29yZGlvblwiKTtcblxuICBjb25zdCBzZXRBY2NvcmRpb25CdG4gPSAoeyBjbG9uZSwgZGF0YSwgaW5kZXggfSkgPT4ge1xuICAgIGNvbnN0IGFjY29yZGlvbkl0ZW1CdG4gPSBjbG9uZS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgIGFjY29yZGlvbkl0ZW1CdG4udGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgIGFjY29yZGlvbkl0ZW1CdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiLCBgY29udGVudC0ke2luZGV4fWApO1xuICAgIGFjY29yZGlvbkl0ZW1CdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgdHJ1ZSk7XG4gICAgYWNjb3JkaW9uSXRlbUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlKTtcbiAgICBhY2NvcmRpb25JdGVtQnRuLnNldEF0dHJpYnV0ZShcImlkXCIsIGBhY2NvcmRpb24tY29udHJvbC0ke2luZGV4fWApO1xuICAgIGFjY29yZGlvbkl0ZW1CdG4uc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBpbmRleCk7XG4gICAgYWNjb3JkaW9uSXRlbUJ0bi5jbGFzc0xpc3QuYWRkKFwiYWNjb3JkaW9uLWJ1dHRvblwiKTtcbiAgfTtcblxuICBjb25zdCBzZXRBY2NvcmRpb25EaXYgPSAoeyBjbG9uZSwgZGF0YSwgaW5kZXggfSkgPT4ge1xuICAgIGNvbnN0IGFjY29yZGlvbkl0ZW1EaXYgPSBjbG9uZS5xdWVyeVNlbGVjdG9yKFwiZGl2XCIpO1xuICAgIGFjY29yZGlvbkl0ZW1EaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgYGNvbnRlbnQtJHtpbmRleH1gKTtcbiAgICBhY2NvcmRpb25JdGVtRGl2LmNsYXNzTGlzdC5hZGQoXCJhY2NvcmRpb24tY29udGVudFwiKTtcbiAgICBkYXRhLmNvbnRlbnQuZm9yRWFjaChjb250ZW50ID0+IHtcbiAgICAgIGNvbnN0IHBFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgY29uc3QgcFRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb250ZW50KTtcbiAgICAgIHBFbC5hcHBlbmRDaGlsZChwVGV4dCk7XG4gICAgICBhY2NvcmRpb25JdGVtRGl2LmFwcGVuZENoaWxkKHBFbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlQWNjb3JkaW9uSXRlbSA9IChkYXRhLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNsb25lID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShhY2NvcmRpb25JdGVtVGVtcGxhdGUuY29udGVudCwgdHJ1ZSk7XG4gICAgY29uc3QgcGFyYW1zID0geyBjbG9uZSwgZGF0YSwgaW5kZXggfTtcbiAgICBzZXRBY2NvcmRpb25CdG4ocGFyYW1zKTtcbiAgICBzZXRBY2NvcmRpb25EaXYocGFyYW1zKTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH07XG5cbiAgZGF0YS5pbmZvcm1hdGlvbnMuZm9yRWFjaCgoaW5mbywgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpdGVtID0gY3JlYXRlQWNjb3JkaW9uSXRlbShpbmZvLCBpbmRleCk7XG4gICAgaW5mb3JtYXRpb25BY2NvcmRpb24uYXBwZW5kKGl0ZW0pO1xuICB9KTtcblxuICByZXR1cm4gaW5mb3JtYXRpb25BY2NvcmRpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBY2NvcmRpb25JbnRlcmFjdGlvbihidXR0b24pIHtcbiAgaWYgKGJ1dHRvbi5tYXRjaGVzKFwiLmFjY29yZGlvbi1idXR0b25cIikpIHtcbiAgICBjb25zdCBidXR0b25Db250cm9scyA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNvbnRyb2xzXCIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25Db250cm9scyk7XG5cbiAgICBjb25zdCBpc0FyaWFFeHBhbmRlZCA9IEJvb2xlYW4oXG4gICAgICBidXR0b24uZ2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiKSA9PT0gXCJ0cnVlXCJcbiAgICApO1xuICAgIGNvbnN0IGlzQXJpYUhpZGRlbiA9IEJvb2xlYW4oYnV0dG9uLmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpID09PSBcInRydWVcIik7XG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgYCR7IWlzQXJpYUV4cGFuZGVkfWApO1xuXG4gICAgaWYgKGlzQXJpYUhpZGRlbikge1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKFwiYWNjb3JkaW9uLWNvbnRlbnQtLXNob3dcIik7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY2NvcmRpb24tY29udGVudC0tc2hvd1wiKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCB0cnVlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBjcmVhdGVBY2NvcmRpb24sIHsgc2V0QWNjb3JkaW9uSW50ZXJhY3Rpb24gfSBmcm9tIFwiLi9hY2NvcmRpb25cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdEluZm9ybWF0aW9uKHB1YnN1Yikge1xuICBjb25zdCBpbmZvcm1hdGlvbkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvcm1hdGlvblwiKTtcbiAgY29uc3QgaW5mb3JtYXRpb25UZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mb3JtYXRpb24tdGVtcGxhdGVcIik7XG5cbiAgY29uc3QgYWRkSW5mb3JtYXRpb24gPSBkYXRhID0+IHtcbiAgICBjb25zdCBjbG9uZSA9IGRvY3VtZW50LmltcG9ydE5vZGUoaW5mb3JtYXRpb25UZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICBjb25zdCBpbmZvcm1hdGlvbkNvbnRlbnQgPSBjbG9uZS5xdWVyeVNlbGVjdG9yKFwiI2luZm9ybWF0aW9uLXRpdGxlXCIpO1xuICAgIGluZm9ybWF0aW9uQ29udGVudC5pbm5lckhUTUwgPSBgR2FtZSBCb3kgJHtkYXRhLm5hbWV9LDxici8+JHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb25cbiAgICB9YDtcbiAgICBjcmVhdGVBY2NvcmRpb24oY2xvbmUsIGRhdGEpO1xuICAgIGluZm9ybWF0aW9uRWwuYXBwZW5kKGNsb25lKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVJbmZvcm1hdGlvbiA9ICgpID0+IHtcbiAgICBpbmZvcm1hdGlvbkVsLmlubmVySFRNTCA9IFwiXCI7XG4gIH07XG5cbiAgY29uc3Qgc3dpdGNoSW5mb3JtYXRpb24gPSBkcm9wZG93bk9wdEluZGV4ID0+IHtcbiAgICByZW1vdmVJbmZvcm1hdGlvbigpO1xuICAgIGFkZEluZm9ybWF0aW9uKHdpbmRvdy5kYXRhW2Ryb3Bkb3duT3B0SW5kZXhdKTtcbiAgfTtcblxuICBwdWJzdWIuc3Vic2NyaWJlKFwiZ2FtZWJveSBzZWxlY3RlZFwiLCAoeyBkcm9wZG93bk9wdEluZGV4ID0gMCB9KSA9PiB7XG4gICAgc3dpdGNoSW5mb3JtYXRpb24oZHJvcGRvd25PcHRJbmRleCk7XG4gIH0pO1xuXG4gIGluZm9ybWF0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgIHNldEFjY29yZGlvbkludGVyYWN0aW9uKGUudGFyZ2V0KTtcbiAgfSk7XG5cbiAgYWRkSW5mb3JtYXRpb24od2luZG93LmRhdGFbMF0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdERyb3Bkb3duKHB1YnN1YiwgaWQpIHtcbiAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gIGNvbnN0IGRyb3Bkb3duT3B0aW9uc0xpc3QgPSBkcm9wZG93bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgIFwiZHJvcGRvd25fX29wdGlvbnNcIlxuICApWzBdO1xuICBjb25zdCBkcm9wZG93bk9wdGlvbnMgPSBbLi4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRyb3Bkb3duX19vcHRcIildO1xuXG4gIGNvbnN0IGFjdGl2YXRlT3B0aW9uID0gbGFiZWxFbCA9PiB7XG4gICAgY29uc3QgaWQgPSBsYWJlbEVsLmdldEF0dHJpYnV0ZShcImZvclwiKTtcbiAgICBsYWJlbEVsLmNsYXNzTGlzdC5hZGQoXCJkcm9wZG93bl9fb3B0LS1hY3RpdmVcIik7XG4gICAgbGFiZWxFbC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKS5jaGVja2VkID0gdHJ1ZTtcbiAgICBwdWJzdWIucHVibGlzaChcImdhbWVib3kgc2VsZWN0ZWRcIiwge1xuICAgICAgZHJvcGRvd25PcHRJbmRleDogZHJvcGRvd25PcHRpb25zLmluZGV4T2YobGFiZWxFbClcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBkZWFjdGl2YXRlT3B0aW9uID0gbGFiZWxFbCA9PiB7XG4gICAgY29uc3QgaWQgPSBsYWJlbEVsLmdldEF0dHJpYnV0ZShcImZvclwiKTtcbiAgICBsYWJlbEVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wZG93bl9fb3B0LS1hY3RpdmVcIik7XG4gICAgbGFiZWxFbC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKS5jaGVja2VkID0gZmFsc2U7XG4gIH07XG5cbiAgZHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRyb3Bkb3duT3B0aW9uc0xpc3QuY2xhc3NMaXN0LnRvZ2dsZShcImRyb3Bkb3duX19vcHRpb25zLS1hY3RpdmVcIik7XG4gICAgY29uc3QgaXNPcGVuID0gZHJvcGRvd25PcHRpb25zTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICBcImRyb3Bkb3duX19vcHRpb25zLS1hY3RpdmVcIlxuICAgICk7XG5cbiAgICBpZiAoIWlzT3Blbikge1xuICAgICAgZHJvcGRvd25PcHRpb25zLmZvckVhY2gob3B0ID0+IGRlYWN0aXZhdGVPcHRpb24ob3B0KSk7XG4gICAgICBhY3RpdmF0ZU9wdGlvbihlLnRhcmdldCk7XG4gICAgfVxuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRDb2xvcnMocHVic3ViKSB7XG4gIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5cIik7XG4gIGNvbnN0IGNvbG9yc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbG9yLW9wdGlvbnNcIik7XG4gIGNvbnN0IGNvbG9ycyA9IFsuLi5jb2xvcnNMaXN0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb2xvci1vcHRfX2xhYmVsXCIpXTtcblxuICBjb25zdCBzdWJzdGl0dXRlQ2xhc3NMaXN0ID0gKGVsZW1lbnQsIG5ld0NsYXNzID0gXCJcIikgPT4ge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0ID0gXCJcIjtcbiAgICBlbGVtZW50LmNsYXNzTGlzdCA9IFsuLi5uZXdDbGFzc107XG4gIH07XG5cbiAgY29uc3QgYXBwbHlDb2xvckZpbHRlciA9IChkcm9wZG93bk9wdEluZGV4ID0gMCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRHQiA9IHdpbmRvdy5kYXRhW2Ryb3Bkb3duT3B0SW5kZXhdO1xuICAgIGNvbnN0IGNvbG9yc1RvSGlkZSA9IGNvbG9ycy5maWx0ZXIoY29sb3IgPT4ge1xuICAgICAgY29uc3QgY29sb3JWYWx1ZSA9IGNvbG9yLmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIik7XG4gICAgICBjb2xvci5jbGFzc0xpc3QucmVtb3ZlKFwiY29sb3Itb3B0X19sYWJlbC0taGlkZVwiKTtcbiAgICAgIHJldHVybiAhY3VycmVudEdCLnRoZW1lcy5pbmNsdWRlcyhjb2xvclZhbHVlKTtcbiAgICB9KTtcbiAgICBjb2xvcnNUb0hpZGUuZm9yRWFjaChjb2xvciA9PlxuICAgICAgY29sb3IuY2xhc3NMaXN0LmFkZChcImNvbG9yLW9wdF9fbGFiZWwtLWhpZGVcIilcbiAgICApO1xuICB9O1xuXG4gIGNvbG9yc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBpZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImZvclwiKTtcbiAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYCMke2lkfWApO1xuICAgIHN1YnN0aXR1dGVDbGFzc0xpc3QobWFpbiwgW2B0aGVtZS0ke2lucHV0LnZhbHVlfWBdKTtcbiAgfSk7XG5cbiAgcHVic3ViLnN1YnNjcmliZShcImdhbWVib3kgc2VsZWN0ZWRcIiwgKHsgZHJvcGRvd25PcHRJbmRleCA9IDAgfSkgPT4ge1xuICAgIGFwcGx5Q29sb3JGaWx0ZXIoZHJvcGRvd25PcHRJbmRleCk7XG4gIH0pO1xuXG4gIGFwcGx5Q29sb3JGaWx0ZXIoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1YlN1YiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZlbnRzID0ge307XG4gIH1cblxuICBzdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ldmVudHNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGlzaChldmVudCwgZGF0YSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzW2V2ZW50XS5tYXAoY2FsbGJhY2sgPT4gY2FsbGJhY2soZGF0YSkpO1xuICB9XG59XG4iLCJpbXBvcnQgc3R5bGVzIGZyb20gXCIuL2luZGV4LnNjc3NcIjtcbmltcG9ydCBpbml0SW5mb3JtYXRpb24gZnJvbSBcIi4vanMvaW5mb3JtYXRpb25cIjtcbmltcG9ydCBpbml0RHJvcGRvd24gZnJvbSBcIi4vanMvZHJvcGRvd25cIjtcbmltcG9ydCBpbml0Q29sb3JzIGZyb20gXCIuL2pzL2NvbG9yLW9wdGlvbnNcIjtcbmltcG9ydCBpbml0QnRuRmlsdGVyIGZyb20gXCIuL2pzL2J0bi1maWx0ZXJcIjtcbmltcG9ydCBQdWJTdWIgZnJvbSBcIi4vanMvcHVic3ViXCI7XG5pbXBvcnQganNvbkRhdGEgZnJvbSBcIi4vZGF0YS9kYXRhLmpzb25cIjtcblxud2luZG93LmRhdGEgPSBqc29uRGF0YS5wcm9kdWN0cztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZXZlbnQgPT4ge1xuICBjb25zdCBwdWJzdWIgPSBuZXcgUHViU3ViKCk7XG5cbiAgaW5pdERyb3Bkb3duKHB1YnN1YiwgXCJkcm9wZG93bi1nYlwiKTtcbiAgaW5pdENvbG9ycyhwdWJzdWIpO1xuICBpbml0QnRuRmlsdGVyKFwiYnRuLWZpbHRlclwiLCBcImZpbHRlcnNcIik7XG4gIGluaXRJbmZvcm1hdGlvbihwdWJzdWIpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0QnRuRmlsdGVyKGJ0bklkLCBmaWx0ZXJJZCkge1xuICBjb25zdCBmaWx0ZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidG5JZCk7XG4gIGNvbnN0IGZpbHRlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWx0ZXJJZCk7XG5cbiAgZmlsdGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZmlsdGVyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJidG5fX2ZpbHRlci0tYWN0aXZlXCIpO1xuICAgIGZpbHRlcnMuY2xhc3NMaXN0LnRvZ2dsZShcImZpbHRlcnMtLWFjdGl2ZVwiKTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9